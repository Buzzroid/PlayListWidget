<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>playlistwidget: /home/roland/playlistwidget/src/playlistwidget/playlistwidgetnew.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>/home/roland/playlistwidget/src/playlistwidget/playlistwidgetnew.h</h1><a href="playlistwidgetnew_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">*   Copyright (C) 2009 by Roland Weigert   *</span>
<a name="l00003"></a>00003 <span class="comment">*   roweigert@t-online.de   *</span>
<a name="l00004"></a>00004 <span class="comment">*                                                                         *</span>
<a name="l00005"></a>00005 <span class="comment">*   This program is free software; you can redistribute it and/or modify  *</span>
<a name="l00006"></a>00006 <span class="comment">*   it under the terms of the GNU General Public License as published by  *</span>
<a name="l00007"></a>00007 <span class="comment">*   the Free Software Foundation; either version 2 of the License, or     *</span>
<a name="l00008"></a>00008 <span class="comment">*   (at your option) any later version.                                   *</span>
<a name="l00009"></a>00009 <span class="comment">*                                                                         *</span>
<a name="l00010"></a>00010 <span class="comment">*   This program is distributed in the hope that it will be useful,       *</span>
<a name="l00011"></a>00011 <span class="comment">*   but WITHOUT ANY WARRANTY; without even the implied warranty of        *</span>
<a name="l00012"></a>00012 <span class="comment">*   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *</span>
<a name="l00013"></a>00013 <span class="comment">*   GNU General Public License for more details.                          *</span>
<a name="l00014"></a>00014 <span class="comment">*                                                                         *</span>
<a name="l00015"></a>00015 <span class="comment">*   You should have received a copy of the GNU General Public License     *</span>
<a name="l00016"></a>00016 <span class="comment">*   along with this program; if not, write to the                         *</span>
<a name="l00017"></a>00017 <span class="comment">*   Free Software Foundation, Inc.,                                       *</span>
<a name="l00018"></a>00018 <span class="comment">*   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *</span>
<a name="l00019"></a>00019 <span class="comment"> ***************************************************************************/</span>
<a name="l00034"></a>00034 <span class="preprocessor">#ifndef _PLAYLISTWIDGETNEW_H_</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">#define _PLAYLISTWIDGETNEW_H_</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;QtGui&gt;</span>
<a name="l00038"></a>00038 
<a name="l00043"></a>00043 <span class="preprocessor">#include "<a class="code" href="mediafile_8h.html">mediafile.h</a>"</span>
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="comment">//prototypes</span>
<a name="l00047"></a>00047 <span class="keyword">class </span><a class="code" href="classplaylistalbum.html" title="This class handles all album-stuff.">playlistalbum</a>;
<a name="l00048"></a>00048 <span class="keyword">class </span><a class="code" href="classplaylisttrack.html" title="This class handles all track-contents.">playlisttrack</a>;
<a name="l00049"></a>00049 <span class="keyword">class </span><a class="code" href="classplaylistdelegate.html" title="This is needed to show the Artistname and albumname splitted on two lines.">playlistdelegate</a>;
<a name="l00050"></a>00050 
<a name="l00060"></a><a class="code" href="classplaylistwidgetnew.html">00060</a> <span class="keyword">class </span><a class="code" href="classplaylistwidgetnew.html" title="The playlistwidgetnew-class itself This widget organises a playlist, with all functionality...">playlistwidgetnew</a> :<span class="keyword">public</span> QTreeWidget
<a name="l00061"></a>00061 {
<a name="l00062"></a>00062   Q_OBJECT
<a name="l00063"></a>00063 <span class="keyword">public</span>:
<a name="l00069"></a>00069   <a class="code" href="classplaylistwidgetnew.html#eacb0f31f6db51f5c7730b5940def85d" title="Constructor Sets up the widget, and activates blingtimer, and rescantimer. .">playlistwidgetnew</a>(QWidget *parent);
<a name="l00075"></a>00075   <span class="keywordtype">void</span> <a class="code" href="classplaylistwidgetnew.html#a3b69aad389a49a42be72344833c751c" title="addsong-function Adds a song on the eend of the playlist. It automatically creates...">addsong</a>(<span class="keyword">const</span> QString filename);
<a name="l00082"></a>00082   <span class="keywordtype">void</span> <a class="code" href="classplaylistwidgetnew.html#a3b69aad389a49a42be72344833c751c" title="addsong-function Adds a song on the eend of the playlist. It automatically creates...">addsong</a>(<a class="code" href="classplaylisttrack.html" title="This class handles all track-contents.">playlisttrack</a> *track);
<a name="l00091"></a>00091   <span class="keywordtype">void</span> <a class="code" href="classplaylistwidgetnew.html#91643b61ac69e17b76f9c56cde00cef3" title="insertsong-function for filenames Inserts a song in front of the given insertionpoint...">insertsong</a>(<span class="keyword">const</span> QString filename,QTreeWidgetItem *insertionpoint);
<a name="l00099"></a>00099   <span class="keywordtype">void</span> <a class="code" href="classplaylistwidgetnew.html#91643b61ac69e17b76f9c56cde00cef3" title="insertsong-function for filenames Inserts a song in front of the given insertionpoint...">insertsong</a>(QTreeWidgetItem *draggeditem,QTreeWidgetItem *insertionpoint);
<a name="l00104"></a>00104   <span class="keyword">const</span> QStringList <a class="code" href="classplaylistwidgetnew.html#3347a6b02f3d9a73443630683cfb289b" title="getplaylist-function">getplaylist</a>();
<a name="l00113"></a>00113   <span class="keyword">const</span> <a class="code" href="classplaylisttrack.html" title="This class handles all track-contents.">playlisttrack</a> * <a class="code" href="classplaylistwidgetnew.html#b4c96775ca092f2322d83134866fceef" title="skiptonext-function This function skips to the next track in playlist. It automatically...">skiptonext</a>();
<a name="l00122"></a>00122   <span class="keyword">const</span> <a class="code" href="classplaylisttrack.html" title="This class handles all track-contents.">playlisttrack</a> * <a class="code" href="classplaylistwidgetnew.html#bfecf6d5c0e5d8d79a74922b4b0b9ff6" title="skiptonprev-function This function skips to the previous track in playlist. It automatically...">skiptoprev</a>();
<a name="l00127"></a>00127   <a class="code" href="classplaylisttrack.html" title="This class handles all track-contents.">playlisttrack</a> * <a class="code" href="classplaylistwidgetnew.html#a2f2254e8c3efac349b823412eb4a7e6" title="getactivetrack-function">getactivetrack</a>();
<a name="l00133"></a>00133   <span class="keywordtype">void</span> <a class="code" href="classplaylistwidgetnew.html#259f3a6d82b949e8b50919f8ec5e4d85" title="recalcall-function This function recalcs all albums, and deletes albums not containing...">recalcall</a>();
<a name="l00138"></a>00138   <span class="keywordtype">void</span> <a class="code" href="classplaylistwidgetnew.html#bfc37f7639ada6eb76958eec0762d6a2" title="setrepeatmode-function">setrepeatmode</a>(<span class="keywordtype">bool</span> mode);
<a name="l00139"></a>00139 <span class="keyword">private</span>:
<a name="l00140"></a>00140   <span class="keywordtype">void</span> mouseMoveEvent(QMouseEvent *event);
<a name="l00141"></a>00141   <span class="keywordtype">void</span> mousePressEvent(QMouseEvent *event);
<a name="l00142"></a>00142   <span class="keywordtype">void</span> dragEnterEvent(QDragEnterEvent *event);
<a name="l00143"></a>00143   <span class="keywordtype">void</span> dropEvent(QDropEvent *event);
<a name="l00144"></a>00144   <span class="keywordtype">void</span> dragMoveEvent(QDragMoveEvent *event);
<a name="l00145"></a>00145   QStringList getallfiles(QString);
<a name="l00146"></a>00146   QMenu *contextmenu;
<a name="l00147"></a>00147   QPoint storedpoint;
<a name="l00148"></a>00148   QPoint dragStartPosition;
<a name="l00149"></a>00149   <span class="keywordtype">int</span> fileindex;
<a name="l00150"></a>00150   QTimer *blingtimer;
<a name="l00151"></a>00151   QTimer *rescantimer;
<a name="l00152"></a>00152   QTimer *scrolltimer;
<a name="l00153"></a>00153   <span class="keywordtype">int</span> trackcount;
<a name="l00154"></a>00154   QPoint lastmousepos;
<a name="l00155"></a>00155   <span class="keywordtype">bool</span> repeatmode;
<a name="l00156"></a>00156   <a class="code" href="classplaylistdelegate.html" title="This is needed to show the Artistname and albumname splitted on two lines.">playlistdelegate</a> *delegate;
<a name="l00157"></a>00157 <span class="keyword">private</span> slots:
<a name="l00158"></a>00158   <span class="keywordtype">void</span> scrollcheck();
<a name="l00159"></a>00159   <span class="keywordtype">void</span> scroll(<span class="keywordtype">int</span>);
<a name="l00160"></a>00160   <span class="keywordtype">void</span> bling();
<a name="l00161"></a>00161   <span class="keywordtype">void</span> playactionslot();
<a name="l00162"></a>00162   <span class="keywordtype">void</span> removeactionslot();
<a name="l00163"></a>00163   <span class="comment">//This needs to be reimplemented for the contextmenu to work</span>
<a name="l00164"></a>00164   <span class="keywordtype">void</span> contextMenuEvent ( QContextMenuEvent * event );
<a name="l00165"></a>00165   <span class="keywordtype">void</span> doubleclicked(QTreeWidgetItem *,<span class="keywordtype">int</span>);
<a name="l00166"></a>00166   <span class="keywordtype">void</span> selectionupdate();
<a name="l00167"></a>00167   <span class="keywordtype">void</span> checkfile(<span class="keyword">const</span> QString &amp;);
<a name="l00168"></a>00168   <span class="keywordtype">void</span> rescanexistingfiles();
<a name="l00169"></a>00169 signals:
<a name="l00175"></a>00175   <span class="keywordtype">void</span> <a class="code" href="classplaylistwidgetnew.html#6084a383c749fcf33bc671ece6f30dc2" title="trackcountchange-signal This signal is emitted, when the number of tracks in the...">trackcountchange</a>(<span class="keywordtype">int</span>);
<a name="l00180"></a>00180   <span class="keywordtype">void</span> <a class="code" href="classplaylistwidgetnew.html#673b178114c9eaf45a4464d5dec6cc8e" title="clearactionsignal This signal is emitted, when clear playlist is selected in the...">clearactionsignal</a>();
<a name="l00186"></a>00186   <span class="keywordtype">void</span> <a class="code" href="classplaylistwidgetnew.html#99b588b1e4f2d5a7b7ff141cf01d19e0" title="removeactionsignal This signal is emitted, when delete tracks is selected in the...">removeactionsignal</a>(<span class="keyword">const</span> QList&lt;QTreeWidgetItem *&gt; items);
<a name="l00191"></a>00191   <span class="keywordtype">void</span> <a class="code" href="classplaylistwidgetnew.html#db0283a2bdf38a90dc365b70ecf59d21" title="actualchange-signal This signal is emitted, when the actual-tarck is changed.">actualchange</a>(<span class="keyword">const</span> <a class="code" href="classplaylisttrack.html" title="This class handles all track-contents.">playlisttrack</a> *);
<a name="l00196"></a>00196   <span class="keywordtype">void</span> <a class="code" href="classplaylistwidgetnew.html#0f35424149a27cec4a3cabbef896ea7f" title="actualfilechangedtags-sgnal This signal is emitted, when the actualfile has changed...">actualfilechangedtags</a>();
<a name="l00197"></a>00197 };
<a name="l00198"></a>00198 
<a name="l00202"></a><a class="code" href="classplaylistalbum.html">00202</a> <span class="keyword">class </span><a class="code" href="classplaylistalbum.html" title="This class handles all album-stuff.">playlistalbum</a> : <span class="keyword">public</span> QTreeWidgetItem
<a name="l00203"></a>00203 {
<a name="l00204"></a>00204   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classplaylistwidgetnew.html" title="The playlistwidgetnew-class itself This widget organises a playlist, with all functionality...">playlistwidgetnew</a>;
<a name="l00205"></a>00205 <span class="keyword">public</span>:
<a name="l00211"></a>00211   <a class="code" href="classplaylistalbum.html#026b8523cd11fb154874351616c921c0" title="Constructs a new album with the data in the given playlisttrack The track is also...">playlistalbum</a>(<a class="code" href="classplaylisttrack.html" title="This class handles all track-contents.">playlisttrack</a> *track,QTreeWidget *parent);
<a name="l00216"></a>00216   <span class="keywordtype">void</span> <a class="code" href="classplaylistalbum.html#544c43b32fc6c567b446cbe01ee2b86c" title="add a track to the tracklist,and sort in under this playlistalbum in the tree">addtrack</a>(<a class="code" href="classplaylisttrack.html" title="This class handles all track-contents.">playlisttrack</a> *);
<a name="l00222"></a>00222   <span class="keywordtype">void</span> <a class="code" href="classplaylistalbum.html#597e35cec3375230380e44b9e2ab10a4" title="removes a track from the tracklist and the tree The playlisttrack is not deleted...">removetrack</a>(<a class="code" href="classplaylisttrack.html" title="This class handles all track-contents.">playlisttrack</a> *);
<a name="l00227"></a>00227   <span class="keywordtype">int</span> <a class="code" href="classplaylistalbum.html#3addf8dca1370d57a6dbda8cc41993e0" title="recalculate the time the albumtracks have together.">recalctime</a>();
<a name="l00231"></a>00231   <span class="keywordtype">void</span> <a class="code" href="classplaylistalbum.html#8078d21a379b993c1afe4efc07ad81b0" title="Sets this album active.">setactive</a>(<span class="keywordtype">bool</span>);
<a name="l00235"></a>00235   <span class="keywordtype">void</span> <a class="code" href="classplaylistalbum.html#c53fb4cccf2893769a72d38bddac3799" title="This function is called to have the blinging-effect.">bling</a>();
<a name="l00239"></a>00239   <span class="keywordtype">void</span> <a class="code" href="classplaylistalbum.html#1c523ef67c8cd87508c900eb0061fb3a" title="This function gets called to update the coverpicture of an album, when a playlisttrack...">repaintcover</a>(<a class="code" href="classplaylisttrack.html" title="This class handles all track-contents.">playlisttrack</a> *);
<a name="l00240"></a>00240 <span class="keyword">private</span>:
<a name="l00241"></a>00241   <span class="keywordtype">int</span> length;
<a name="l00242"></a>00242   <span class="keywordtype">long</span> viewindex;
<a name="l00243"></a>00243   <span class="keyword">static</span> <span class="keywordtype">long</span> realindex;
<a name="l00244"></a>00244   QString albumname;
<a name="l00245"></a>00245   QString artistname;
<a name="l00246"></a>00246   QIcon albumart;
<a name="l00247"></a>00247   <span class="keywordtype">bool</span> isplaying;
<a name="l00248"></a>00248   <span class="keywordtype">int</span> blingindex;
<a name="l00249"></a>00249   <span class="keywordtype">bool</span> reverse;
<a name="l00250"></a>00250 };
<a name="l00251"></a>00251 
<a name="l00256"></a><a class="code" href="classplaylisttrack.html">00256</a> <span class="keyword">class </span><a class="code" href="classplaylisttrack.html" title="This class handles all track-contents.">playlisttrack</a> : <span class="keyword">public</span> QTreeWidgetItem
<a name="l00257"></a>00257 {
<a name="l00258"></a>00258   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classplaylistalbum.html" title="This class handles all album-stuff.">playlistalbum</a>;
<a name="l00259"></a>00259   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classplaylistwidgetnew.html" title="The playlistwidgetnew-class itself This widget organises a playlist, with all functionality...">playlistwidgetnew</a>;
<a name="l00260"></a>00260 <span class="keyword">public</span>:
<a name="l00266"></a>00266   <a class="code" href="classplaylisttrack.html#5ae36dc43580f135a81a3418dede0132" title="Constructs a new playlisttrack with the given filename.">playlisttrack</a>(<span class="keyword">const</span> QString filename,QTreeWidget *parent);
<a name="l00270"></a>00270   <span class="keywordtype">void</span> <a class="code" href="classplaylisttrack.html#748bc85acd2ac23e0f04be795b2aa160" title="Rereads the tags, and changes the displayed Text if it changed.">reread</a>();
<a name="l00274"></a>00274   <span class="keywordtype">void</span> <a class="code" href="classplaylisttrack.html#1e4eb68693fe50e57bc5ce5dab89c2e2" title="Sets this track as active track, and highlights it.">setactive</a>(<span class="keywordtype">bool</span>);
<a name="l00279"></a><a class="code" href="classplaylisttrack.html#45d0ce6c7b3371215c7d4e0602761df2">00279</a>   <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classplaylisttrack.html#45d0ce6c7b3371215c7d4e0602761df2">isactive</a>()
<a name="l00280"></a>00280   {
<a name="l00281"></a>00281     <span class="keywordflow">return</span> isplaying;
<a name="l00282"></a>00282   };
<a name="l00287"></a><a class="code" href="classplaylisttrack.html#93a33d2b803f10f273bc9ae1dc4ee1d1">00287</a>   <span class="keyword">inline</span> <span class="keyword">const</span> QString <a class="code" href="classplaylisttrack.html#93a33d2b803f10f273bc9ae1dc4ee1d1" title="Get the albumname of this track.">getalbum</a>()<span class="keyword">const</span>
<a name="l00288"></a>00288 <span class="keyword">  </span>{
<a name="l00289"></a>00289     <span class="keywordflow">return</span> albumname;
<a name="l00290"></a>00290   };
<a name="l00295"></a><a class="code" href="classplaylisttrack.html#f953e4fbf6b35eab28fed57dae1424bf">00295</a>   <span class="keyword">inline</span> <span class="keyword">const</span> QString <a class="code" href="classplaylisttrack.html#f953e4fbf6b35eab28fed57dae1424bf" title="Get the Artistname of this track.">getartist</a>()<span class="keyword">const</span>
<a name="l00296"></a>00296 <span class="keyword">  </span>{
<a name="l00297"></a>00297     <span class="keywordflow">return</span> artistname;
<a name="l00298"></a>00298   };
<a name="l00303"></a><a class="code" href="classplaylisttrack.html#783acd09595f16c12120e41a102a1aea">00303</a>   <span class="keyword">inline</span> <span class="keyword">const</span> QString <a class="code" href="classplaylisttrack.html#783acd09595f16c12120e41a102a1aea" title="Get the filname of this track.">getfile</a>()<span class="keyword">const</span>
<a name="l00304"></a>00304 <span class="keyword">  </span>{
<a name="l00305"></a>00305     <span class="keywordflow">return</span> filename;
<a name="l00306"></a>00306   };
<a name="l00311"></a><a class="code" href="classplaylisttrack.html#ee3aee3f12d522377d4321d46fa2b51f">00311</a>   <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classplaylisttrack.html#ee3aee3f12d522377d4321d46fa2b51f" title="Get the songlength of this track.">getlength</a>()<span class="keyword">const</span>
<a name="l00312"></a>00312 <span class="keyword">  </span>{
<a name="l00313"></a>00313     <span class="keywordflow">return</span> length;
<a name="l00314"></a>00314   };
<a name="l00319"></a><a class="code" href="classplaylisttrack.html#5fe67645b9b4fca0774b8c1943ea26dc">00319</a>   <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">long</span> <a class="code" href="classplaylisttrack.html#5fe67645b9b4fca0774b8c1943ea26dc" title="Get the internal index of the track.">getindex</a>()<span class="keyword">const</span>
<a name="l00320"></a>00320 <span class="keyword">  </span>{
<a name="l00321"></a>00321     <span class="keywordflow">return</span> viewindex;
<a name="l00322"></a>00322   };
<a name="l00323"></a>00323 <span class="keyword">private</span>:
<a name="l00324"></a>00324   QDateTime modifieddate;
<a name="l00325"></a>00325   QString filename;
<a name="l00326"></a>00326   QString albumname;
<a name="l00327"></a>00327   QString artistname;
<a name="l00328"></a>00328   QString songname;
<a name="l00329"></a>00329   <span class="keywordtype">int</span> track;
<a name="l00330"></a>00330   QIcon albumart;
<a name="l00331"></a>00331   <span class="keywordtype">int</span> length;
<a name="l00332"></a>00332   <span class="keywordtype">int</span> viewindex;
<a name="l00333"></a>00333   <span class="keyword">static</span> <span class="keywordtype">long</span> runningindex;
<a name="l00334"></a>00334   <span class="keywordtype">bool</span> isplaying;
<a name="l00335"></a>00335   <span class="keywordtype">int</span> blingindex;
<a name="l00336"></a>00336   <span class="keywordtype">bool</span> reverse;
<a name="l00337"></a>00337   <span class="keywordtype">void</span> bling();
<a name="l00338"></a>00338 };
<a name="l00339"></a>00339 
<a name="l00343"></a><a class="code" href="classplaylistdelegate.html">00343</a> <span class="keyword">class </span><a class="code" href="classplaylistdelegate.html" title="This is needed to show the Artistname and albumname splitted on two lines.">playlistdelegate</a> : <span class="keyword">public</span> QItemDelegate
<a name="l00344"></a>00344 {
<a name="l00345"></a>00345 <span class="keyword">public</span>:
<a name="l00349"></a>00349   <a class="code" href="classplaylistdelegate.html#1b936ff1ee6b7e118c7434693d33f33d" title="This only passes throught ot the QItemdelegate-Constructor.">playlistdelegate</a>(QObject *parent);
<a name="l00353"></a>00353   <span class="keywordtype">void</span> <a class="code" href="classplaylistdelegate.html#124fa18717365aca0f292137b6d8758e" title="This does the paint of the text on two lines if there is a   in the text.">paint</a> ( QPainter * painter, <span class="keyword">const</span> QStyleOptionViewItem &amp; option, <span class="keyword">const</span> QModelIndex &amp; index ) <span class="keyword">const</span>;
<a name="l00354"></a>00354 };
<a name="l00355"></a>00355 
<a name="l00356"></a>00356 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Nov 17 14:32:15 2009 for playlistwidget by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
